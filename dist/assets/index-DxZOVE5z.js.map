{"version":3,"mappings":";kJAEAA,EAAe,KAAO,iBACf,SAASA,EAAeC,EAAa,GAAI,CAC5C,OAAIA,EAAW,UAAY,KAAOA,EAAW,aAClCC,EAASD,CAAU,EACvBE,EAASF,CAAU,CAC9B,CACA,SAASE,EAASF,EAAY,CAC1B,IAAIG,EACAC,EACAC,EACAC,EACJ,OAAOC,EAAiBC,IAAY,CAChC,GAAI,oBACJ,KAAM,kBACN,KAAM,sBACN,KAAMT,EAAe,KACrB,MAAM,QAAQ,CAAE,QAAAU,EAAS,iBAAAC,EAAkB,GAAGC,CAAI,EAAK,GAAI,CACvD,GAAI,CACA,MAAMC,EAAW,MAAM,KAAK,YAAW,EACjCC,GAAY,MAAMD,EAAS,QAAQ,CACrC,OAAQ,sBACR,OAAQ,sBAAuBD,GAAQA,EAAK,kBACtC,CAAC,CAAE,WAAY,SAAS,CAAE,EAC1B,EAC1B,CAAiB,GAAG,IAAKG,GAAMC,EAAWD,CAAC,CAAC,EACvBV,IACDA,EAAkB,KAAK,kBAAkB,KAAK,IAAI,EAClDQ,EAAS,GAAG,kBAAmBR,CAAe,GAE7CC,IACDA,EAAe,KAAK,eAAe,KAAK,IAAI,EAC5CO,EAAS,GAAG,eAAgBP,CAAY,GAEvCC,IACDA,EAAa,KAAK,aAAa,KAAK,IAAI,EACxCM,EAAS,GAAG,aAAcN,CAAU,GAGxC,IAAIU,EAAiB,MAAM,KAAK,WAAU,EAC1C,GAAIP,GAAWO,IAAmBP,EAAS,CACvC,MAAMQ,EAAQ,MAAM,KAAK,YAAY,CAAE,QAAAR,EAAS,EAAE,MAAOS,GAAU,CAC/D,GAAIA,EAAM,OAASC,EAAyB,KACxC,MAAMD,EACV,MAAO,CAAE,GAAIF,CAAc,CAC/B,CAAC,EACDA,GAAiBC,GAAA,YAAAA,EAAO,KAAMD,CAClC,CACA,MAAO,CACH,SAAWN,EACLG,EAAS,IAAKO,IAAa,CAAE,QAAAA,EAAS,aAAc,IAAK,EACzDP,EACN,QAASG,CAC7B,CACY,OACOE,EAAO,CACV,KAAI,uFAAuF,KAAKA,EAAM,OAAO,EACnG,IAAIC,EAAyBD,CAAK,EACtCA,CACV,CACJ,EACA,MAAM,YAAa,OACf,MAAMN,EAAW,MAAM,KAAK,YAAW,EACnCR,IACAQ,EAAS,eAAe,kBAAmBR,CAAe,EAC1DA,EAAkB,QAElBC,IACAO,EAAS,eAAe,eAAgBP,CAAY,EACpDA,EAAe,QAEfC,IACAM,EAAS,eAAe,aAAcN,CAAU,EAChDA,EAAa,QAEjBM,EAAS,WAAU,GACnBS,EAAAT,EAAS,QAAT,MAAAS,EAAA,KAAAT,EACJ,EACA,MAAM,aAAc,CAEhB,OAAQ,MADS,MAAM,KAAK,YAAW,GAChB,QAAQ,CAC3B,OAAQ,cACxB,CAAa,GAAG,IAAKE,GAAMC,EAAWD,CAAC,CAAC,CAChC,EACA,MAAM,YAAa,CAEf,MAAML,EAAW,MADA,MAAM,KAAK,YAAW,GACP,QAAQ,CACpC,OAAQ,aACxB,CAAa,EACD,OAAO,OAAOA,CAAO,CACzB,EACA,MAAM,aAAc,CAChB,GAAI,CAACN,EAAgB,CACjB,MAAMmB,GAAc,IAAM,OACtB,OAAI,OAAOtB,EAAW,YAAe,SAC1B,CAAE,QAASA,EAAW,UAAU,EACpC,CACH,GAAGA,EAAW,WACd,UAASqB,EAAArB,EAAW,aAAX,YAAAqB,EAAuB,UAAW,KACnE,CACgB,GAAC,EACK,CAAE,wBAAAE,CAAuB,EAAK,wDAAM,QAAO,qBAAsB,mEAMvEpB,EALYoB,EAAwB,CAChC,GAAGvB,EACH,YAAaQ,EAAO,OAAO,IAAKM,GAAMA,EAAE,EAAE,EAC1C,WAAAQ,CACpB,CAAiB,EACoB,YAAW,CACpC,CACA,OAAOnB,CACX,EACA,MAAM,cAAe,CACjB,GAAI,CAEA,MAAO,CAAC,EADS,MAAM,KAAK,YAAW,GACrB,MACtB,MACM,CACF,MAAO,EACX,CACJ,EACA,MAAM,YAAY,CAAE,0BAAAqB,EAA2B,QAAAf,GAAW,aACtD,MAAMQ,EAAQT,EAAO,OAAO,KAAMS,GAAUA,EAAM,KAAOR,CAAO,EAChE,GAAI,CAACQ,EACD,MAAM,IAAIQ,EAAiB,IAAIC,CAAyB,EAC5D,MAAMd,EAAW,MAAM,KAAK,YAAW,EACvC,GAAI,CACA,aAAMA,EAAS,QAAQ,CACnB,OAAQ,6BACR,OAAQ,CAAC,CAAE,QAASe,EAAYV,EAAM,EAAE,EAAG,CAC/D,CAAiB,EACMA,CACX,OACOC,EAAO,CAEV,GAAIA,EAAM,OAAS,KACf,GAAI,CACA,IAAIU,EACAJ,GAAA,MAAAA,EAA2B,kBAC3BI,EAAoBJ,EAA0B,kBAE9CI,GAAoBP,EAAAJ,EAAM,iBAAN,MAAAI,EAAsB,QAAQ,IAC5C,EAACQ,EAAAZ,EAAM,iBAAN,YAAAY,EAAsB,QAAQ,GAAG,EAClC,GACV,IAAIC,GACAC,EAAAP,GAAA,YAAAA,EAA2B,UAA3B,MAAAO,EAAoC,OACpCD,EAAUN,EAA0B,QAEpCM,EAAU,GAACE,EAAAf,EAAM,QAAQ,UAAd,YAAAe,EAAuB,KAAK,KAAM,EAAE,EACnD,MAAMC,EAAmB,CACrB,kBAAAL,EACA,QAASD,EAAYlB,CAAO,EAC5B,WAAWe,GAAA,YAAAA,EAA2B,YAAaP,EAAM,KACzD,SAAUO,GAAA,YAAAA,EAA2B,SACrC,gBAAgBA,GAAA,YAAAA,EAA2B,iBACvCP,EAAM,eACV,QAAAa,CAC5B,EACwB,aAAMlB,EAAS,QAAQ,CACnB,OAAQ,0BACR,OAAQ,CAACqB,CAAgB,CACrD,CAAyB,EACMhB,CACX,OACOC,EAAO,CACV,MAAM,IAAIC,EAAyBD,CAAK,CAC5C,CAEJ,MAAM,IAAIO,EAAiBP,CAAK,CACpC,CACJ,EACA,kBAAkBL,EAAU,CACpBA,EAAS,SAAW,EACpB,KAAK,aAAY,EAEjBL,EAAO,QAAQ,KAAK,SAAU,CAC1B,SAAUK,EAAS,IAAKC,GAAMC,EAAWD,CAAC,CAAC,CAC/D,CAAiB,CACT,EACA,eAAeG,EAAO,CAClB,MAAMR,EAAU,OAAOQ,CAAK,EAC5BT,EAAO,QAAQ,KAAK,SAAU,CAAE,QAAAC,CAAO,CAAE,CAC7C,EACA,MAAM,aAAayB,EAAQ,CACvB1B,EAAO,QAAQ,KAAK,YAAY,EAChC,MAAMI,EAAW,MAAM,KAAK,YAAW,EACnCR,IACAQ,EAAS,eAAe,kBAAmBR,CAAe,EAC1DA,EAAkB,QAElBC,IACAO,EAAS,eAAe,eAAgBP,CAAY,EACpDA,EAAe,QAEfC,IACAM,EAAS,eAAe,aAAcN,CAAU,EAChDA,EAAa,OAErB,CACR,EAAM,CACN,CACA,SAASL,EAASD,EAAY,CAE1B,IAAImC,EACAhC,EACAC,EACAC,EACAC,EACJ,OAAOC,EAAiBC,IAAY,CAChC,GAAI,oBACJ,KAAM,kBACN,KAAM,sBACN,KAAMT,EAAe,KACrB,MAAM,QAAQ,CAAE,QAAAU,EAAS,iBAAAC,CAAgB,EAAK,GAAI,CAC9C,GAAI,CACA,MAAME,EAAW,MAAM,KAAK,YAAW,EACjCC,GAAY,MAAMD,EAAS,QAAQ,CACrC,OAAQ,qBAC5B,CAAiB,GAAG,IAAKE,GAAMC,EAAWD,CAAC,CAAC,EACvBV,IACDA,EAAkB,KAAK,kBAAkB,KAAK,IAAI,EAClDQ,EAAS,GAAG,kBAAmBR,CAAe,GAE7CC,IACDA,EAAe,KAAK,eAAe,KAAK,IAAI,EAC5CO,EAAS,GAAG,eAAgBP,CAAY,GAEvCC,IACDA,EAAa,KAAK,aAAa,KAAK,IAAI,EACxCM,EAAS,GAAG,aAAcN,CAAU,GAGxC,IAAIU,EAAiB,MAAM,KAAK,WAAU,EAC1C,GAAIP,GAAWO,IAAmBP,EAAS,CACvC,MAAMQ,EAAQ,MAAM,KAAK,YAAY,CAAE,QAAAR,EAAS,EAAE,MAAOS,GAAU,CAC/D,GAAIA,EAAM,OAASC,EAAyB,KACxC,MAAMD,EACV,MAAO,CAAE,GAAIF,CAAc,CAC/B,CAAC,EACDA,GAAiBC,GAAA,YAAAA,EAAO,KAAMD,CAClC,CACA,MAAO,CACH,SAAWN,EACLG,EAAS,IAAKO,IAAa,CAAE,QAAAA,EAAS,aAAc,IAAK,EACzDP,EACN,QAASG,CAC7B,CACY,OACOE,EAAO,CACV,KAAI,sEAAsE,KAAKA,EAAM,OAAO,EAClF,IAAIC,EAAyBD,CAAK,EACtCA,CACV,CACJ,EACA,MAAM,YAAa,CACf,MAAMN,EAAW,MAAM,KAAK,YAAW,EACnCR,IACAQ,EAAS,eAAe,kBAAmBR,CAAe,EAC1DA,EAAkB,QAElBC,IACAO,EAAS,eAAe,eAAgBP,CAAY,EACpDA,EAAe,QAEfC,IACAM,EAAS,eAAe,aAAcN,CAAU,EAChDA,EAAa,QAEjBM,EAAS,WAAU,EACnBA,EAAS,MAAK,CAClB,EACA,MAAM,aAAc,CAEhB,OAAQ,MADS,MAAM,KAAK,YAAW,GAChB,QAAQ,CAC3B,OAAQ,cACxB,CAAa,GAAG,IAAKE,GAAMC,EAAWD,CAAC,CAAC,CAChC,EACA,MAAM,YAAa,CAEf,MAAML,EAAU,MADC,MAAM,KAAK,YAAW,GACR,QAAQ,CACnC,OAAQ,aACxB,CAAa,EACD,OAAO,OAAOA,CAAO,CACzB,EACA,MAAM,aAAc,OAChB,GAAI,CAACN,EAAgB,CAGjB,MAAMiC,EAAoB,MAAO,SAAY,CACzC,KAAM,CAAE,QAASC,GAAQ,MAAKC,EAAA,wBAAAD,CAAA,OAAC,QAAO,qBAAS,OAAAE,KAAA,kDAC/C,OAAI,OAAOF,GAAQ,YAAc,OAAOA,EAAI,SAAY,WAC7CA,EAAI,QACRA,CACX,GAAC,EACDF,EAAM,IAAIC,EAAkB,CAAE,GAAGpC,EAAY,qBAAkB,CAAE,EAEjE,MAAMwC,GAAyBnB,EAAAc,EAAI,kBAAJ,YAAAd,EAAqB,aAC9CJ,EAAQT,EAAO,OAAO,KAAMS,GAAUjB,EAAW,QACjDiB,EAAM,KAAOjB,EAAW,QACxBiB,EAAM,KAAOuB,CAAsB,GAAKhC,EAAO,OAAO,CAAC,EACvDC,EAAUT,EAAW,UAAWiB,GAAA,YAAAA,EAAO,IACvCwB,EAAazC,EAAW,aAAciB,GAAA,YAAAA,EAAO,QAAQ,QAAQ,KAAK,IACxEd,EAAiBgC,EAAI,iBAAiBM,EAAYhC,CAAO,CAC7D,CACA,OAAON,CACX,EACA,MAAM,cAAe,CACjB,GAAI,CAEA,MAAO,CAAC,EADS,MAAM,KAAK,YAAW,GACrB,MACtB,MACM,CACF,MAAO,EACX,CACJ,EACA,MAAM,YAAY,CAAE,0BAAAqB,EAA2B,QAAAf,GAAW,aACtD,MAAMQ,EAAQT,EAAO,OAAO,KAAMS,GAAUA,EAAM,KAAOR,CAAO,EAChE,GAAI,CAACQ,EACD,MAAM,IAAIQ,EAAiB,IAAIC,CAAyB,EAC5D,MAAMd,EAAW,MAAM,KAAK,YAAW,EACvC,GAAI,CACA,aAAMA,EAAS,QAAQ,CACnB,OAAQ,6BACR,OAAQ,CAAC,CAAE,QAASe,EAAYV,EAAM,EAAE,EAAG,CAC/D,CAAiB,EACMA,CACX,OACOC,EAAO,CAEV,GAAIA,EAAM,OAAS,KACf,GAAI,CACA,IAAIU,EACAJ,GAAA,MAAAA,EAA2B,kBAC3BI,EAAoBJ,EAA0B,kBAE9CI,GAAoBP,EAAAJ,EAAM,iBAAN,MAAAI,EAAsB,QAAQ,IAC5C,EAACQ,EAAAZ,EAAM,iBAAN,YAAAY,EAAsB,QAAQ,GAAG,EAClC,GACV,IAAIC,GACAC,EAAAP,GAAA,YAAAA,EAA2B,UAA3B,MAAAO,EAAoC,OACpCD,EAAUN,EAA0B,QAEpCM,EAAU,GAACE,EAAAf,EAAM,QAAQ,UAAd,YAAAe,EAAuB,KAAK,KAAM,EAAE,EACnD,MAAMC,EAAmB,CACrB,kBAAAL,EACA,QAASD,EAAYlB,CAAO,EAC5B,WAAWe,GAAA,YAAAA,EAA2B,YAAaP,EAAM,KACzD,SAAUO,GAAA,YAAAA,EAA2B,SACrC,gBAAgBA,GAAA,YAAAA,EAA2B,iBACvCP,EAAM,eACV,QAAAa,CAC5B,EACwB,aAAMlB,EAAS,QAAQ,CACnB,OAAQ,0BACR,OAAQ,CAACqB,CAAgB,CACrD,CAAyB,EACMhB,CACX,OACOC,EAAO,CACV,MAAM,IAAIC,EAAyBD,CAAK,CAC5C,CAEJ,MAAM,IAAIO,EAAiBP,CAAK,CACpC,CACJ,EACA,kBAAkBL,EAAU,CACpBA,EAAS,SAAW,EACpB,KAAK,aAAY,EAEjBL,EAAO,QAAQ,KAAK,SAAU,CAC1B,SAAUK,EAAS,IAAKC,GAAMC,EAAWD,CAAC,CAAC,CAC/D,CAAiB,CACT,EACA,eAAeG,EAAO,CAClB,MAAMR,EAAU,OAAOQ,CAAK,EAC5BT,EAAO,QAAQ,KAAK,SAAU,CAAE,QAAAC,CAAO,CAAE,CAC7C,EACA,MAAM,aAAayB,EAAQ,CACvB1B,EAAO,QAAQ,KAAK,YAAY,EAChC,MAAMI,EAAW,MAAM,KAAK,YAAW,EACnCR,IACAQ,EAAS,eAAe,kBAAmBR,CAAe,EAC1DA,EAAkB,QAElBC,IACAO,EAAS,eAAe,eAAgBP,CAAY,EACpDA,EAAe,QAEfC,IACAM,EAAS,eAAe,aAAcN,CAAU,EAChDA,EAAa,OAErB,CACR,EAAM,CACN,CCxYAoC,EAAK,KAAO,OACL,SAASA,EAAK1C,EAAa,GAAI,CAClC,KAAM,CAAE,eAAA2C,EAAiB,EAAK,EAAK3C,EACnC,IAAI4C,EACAtC,EACJ,OAAOC,EAAiBC,IAAY,CAChC,GAAI,OACJ,KAAM,OACN,KAAMkC,EAAK,KACX,MAAM,QAAQ,CAAE,iBAAAhC,CAAgB,EAAK,GAAI,OACrC,MAAME,EAAW,MAAM,KAAK,YAAW,EACvC,GAAI,CAACA,EACD,MAAM,IAAIiC,EACd,MAAMhC,EAAW,MAAM,KAAK,YAAW,EACjCJ,EAAU,MAAM,KAAK,WAAU,EACrC,OAAKH,IACDA,EAAa,KAAK,aAAa,KAAK,IAAI,EACxCM,EAAS,GAAG,aAAcN,CAAU,GAGpCqC,GACA,OAAMtB,EAAAb,EAAO,UAAP,YAAAa,EAAgB,WAAW,sBAC9B,CAEH,SAAWX,EACLG,EAAS,IAAKO,IAAa,CAAE,QAAAA,EAAS,aAAc,IAAK,EACzDP,EACN,QAAAJ,CAChB,CACQ,EACA,MAAM,YAAa,OACf,MAAMG,EAAW,MAAM,KAAK,YAAW,EACvC,GAAI,CAACA,EACD,MAAM,IAAIiC,EACVvC,IACAM,EAAS,eAAe,aAAcN,CAAU,EAChDA,EAAa,QAGbqC,GACA,OAAMtB,EAAAb,EAAO,UAAP,YAAAa,EAAgB,QAAQ,oBAAqB,IAC3D,EACA,MAAM,aAAc,CAChB,MAAMT,EAAW,MAAM,KAAK,YAAW,EACvC,GAAI,CAACA,EACD,MAAM,IAAIiC,EACd,OAAQ,MAAMjC,EAAS,QAAQ,CAAE,OAAQ,cAAc,CAAE,GAAG,IAAIG,CAAU,CAC9E,EACA,MAAM,aAAc,CAGhB,GADiB,OAAO,OAAW,MAAe,2BAAQ,UAAW,OAGrE,IAAI,CAAC6B,EAAW,CACZ,KAAM,CAAE,QAASP,GAAQ,MAAKC,EAAA,wBAAAD,CAAA,OAAC,QAAO,qBAA4B,OAAAE,KAAA,kBAAAF,CAAA,6BAC5DF,EAAM,IAAIE,EAAIrC,CAAU,EAGxB0C,EAAO,MAAMI,EAAY,IAAMX,EAAI,KAAK,UAAW,CACrD,QAASnC,EAAW,yBAA2B,EACnE,CAAiB,EACD,GAAI,CAAC0C,EACD,MAAM,IAAI,MAAM,iCAAiC,EAGrD,MAAMK,EAAkB,MAAO,SAAY,CACvC,MAAMC,EAAW,YAAM,OAAO,qBAAiC,OAAAT,KAAA,+BAC/D,OAAI,OAAOS,EAAS,iBAAoB,YACpC,OAAOA,EAAS,QAAQ,iBAAoB,WACrCA,EAAS,QAAQ,gBACrBA,EAAS,eACpB,GAAC,EACDJ,EAAY,IAAIG,EAAgBL,EAAMP,CAAG,CAC7C,CACA,OAAOS,EACX,EACA,MAAM,YAAa,CACf,MAAMhC,EAAW,MAAM,KAAK,YAAW,EACvC,GAAI,CAACA,EACD,MAAM,IAAIiC,EACd,OAAO,OAAOjC,EAAS,OAAO,CAClC,EACA,MAAM,cAAe,OACjB,GAAI,CAIA,OAHuB+B,GAElB,OAAMtB,EAAAb,EAAO,UAAP,YAAAa,EAAgB,QAAQ,sBAExB,GAEJ,CAAC,EADS,MAAM,KAAK,YAAW,GACrB,MACtB,MACM,CACF,MAAO,EACX,CACJ,EACA,mBAAoB,CAEpB,EACA,gBAAiB,CAEjB,EACA,cAAe,CACXb,EAAO,QAAQ,KAAK,YAAY,CACpC,CACR,EAAM,CACN","names":["coinbaseWallet","parameters","version3","version4","walletProvider","accountsChanged","chainChanged","disconnect","createConnector","config","chainId","withCapabilities","rest","provider","accounts","x","getAddress","currentChainId","chain","error","UserRejectedRequestError","address","_a","preference","createCoinbaseWalletSDK","addEthereumChainParameter","SwitchChainError","ChainNotConfiguredError","numberToHex","blockExplorerUrls","_b","rpcUrls","_c","_d","addEthereumChain","_error","sdk","CoinbaseWalletSDK","SDK","__vitePreload","n","walletExtensionChainId","jsonRpcUrl","safe","shimDisconnect","provider_","ProviderNotFoundError","withTimeout","SafeAppProvider","Provider"],"ignoreList":[0,1],"sources":["../../node_modules/@wagmi/connectors/dist/esm/coinbaseWallet.js","../../node_modules/@wagmi/connectors/dist/esm/safe.js"],"sourcesContent":["import { ChainNotConfiguredError, createConnector, } from '@wagmi/core';\nimport { getAddress, numberToHex, SwitchChainError, UserRejectedRequestError, } from 'viem';\ncoinbaseWallet.type = 'coinbaseWallet';\nexport function coinbaseWallet(parameters = {}) {\n    if (parameters.version === '3' || parameters.headlessMode)\n        return version3(parameters);\n    return version4(parameters);\n}\nfunction version4(parameters) {\n    let walletProvider;\n    let accountsChanged;\n    let chainChanged;\n    let disconnect;\n    return createConnector((config) => ({\n        id: 'coinbaseWalletSDK',\n        name: 'Coinbase Wallet',\n        rdns: 'com.coinbase.wallet',\n        type: coinbaseWallet.type,\n        async connect({ chainId, withCapabilities, ...rest } = {}) {\n            try {\n                const provider = await this.getProvider();\n                const accounts = (await provider.request({\n                    method: 'eth_requestAccounts',\n                    params: 'instantOnboarding' in rest && rest.instantOnboarding\n                        ? [{ onboarding: 'instant' }]\n                        : [],\n                })).map((x) => getAddress(x));\n                if (!accountsChanged) {\n                    accountsChanged = this.onAccountsChanged.bind(this);\n                    provider.on('accountsChanged', accountsChanged);\n                }\n                if (!chainChanged) {\n                    chainChanged = this.onChainChanged.bind(this);\n                    provider.on('chainChanged', chainChanged);\n                }\n                if (!disconnect) {\n                    disconnect = this.onDisconnect.bind(this);\n                    provider.on('disconnect', disconnect);\n                }\n                // Switch to chain if provided\n                let currentChainId = await this.getChainId();\n                if (chainId && currentChainId !== chainId) {\n                    const chain = await this.switchChain({ chainId }).catch((error) => {\n                        if (error.code === UserRejectedRequestError.code)\n                            throw error;\n                        return { id: currentChainId };\n                    });\n                    currentChainId = chain?.id ?? currentChainId;\n                }\n                return {\n                    accounts: (withCapabilities\n                        ? accounts.map((address) => ({ address, capabilities: {} }))\n                        : accounts),\n                    chainId: currentChainId,\n                };\n            }\n            catch (error) {\n                if (/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(error.message))\n                    throw new UserRejectedRequestError(error);\n                throw error;\n            }\n        },\n        async disconnect() {\n            const provider = await this.getProvider();\n            if (accountsChanged) {\n                provider.removeListener('accountsChanged', accountsChanged);\n                accountsChanged = undefined;\n            }\n            if (chainChanged) {\n                provider.removeListener('chainChanged', chainChanged);\n                chainChanged = undefined;\n            }\n            if (disconnect) {\n                provider.removeListener('disconnect', disconnect);\n                disconnect = undefined;\n            }\n            provider.disconnect();\n            provider.close?.();\n        },\n        async getAccounts() {\n            const provider = await this.getProvider();\n            return (await provider.request({\n                method: 'eth_accounts',\n            })).map((x) => getAddress(x));\n        },\n        async getChainId() {\n            const provider = await this.getProvider();\n            const chainId = (await provider.request({\n                method: 'eth_chainId',\n            }));\n            return Number(chainId);\n        },\n        async getProvider() {\n            if (!walletProvider) {\n                const preference = (() => {\n                    if (typeof parameters.preference === 'string')\n                        return { options: parameters.preference };\n                    return {\n                        ...parameters.preference,\n                        options: parameters.preference?.options ?? 'all',\n                    };\n                })();\n                const { createCoinbaseWalletSDK } = await import('@coinbase/wallet-sdk');\n                const sdk = createCoinbaseWalletSDK({\n                    ...parameters,\n                    appChainIds: config.chains.map((x) => x.id),\n                    preference,\n                });\n                walletProvider = sdk.getProvider();\n            }\n            return walletProvider;\n        },\n        async isAuthorized() {\n            try {\n                const accounts = await this.getAccounts();\n                return !!accounts.length;\n            }\n            catch {\n                return false;\n            }\n        },\n        async switchChain({ addEthereumChainParameter, chainId }) {\n            const chain = config.chains.find((chain) => chain.id === chainId);\n            if (!chain)\n                throw new SwitchChainError(new ChainNotConfiguredError());\n            const provider = await this.getProvider();\n            try {\n                await provider.request({\n                    method: 'wallet_switchEthereumChain',\n                    params: [{ chainId: numberToHex(chain.id) }],\n                });\n                return chain;\n            }\n            catch (error) {\n                // Indicates chain is not added to provider\n                if (error.code === 4902) {\n                    try {\n                        let blockExplorerUrls;\n                        if (addEthereumChainParameter?.blockExplorerUrls)\n                            blockExplorerUrls = addEthereumChainParameter.blockExplorerUrls;\n                        else\n                            blockExplorerUrls = chain.blockExplorers?.default.url\n                                ? [chain.blockExplorers?.default.url]\n                                : [];\n                        let rpcUrls;\n                        if (addEthereumChainParameter?.rpcUrls?.length)\n                            rpcUrls = addEthereumChainParameter.rpcUrls;\n                        else\n                            rpcUrls = [chain.rpcUrls.default?.http[0] ?? ''];\n                        const addEthereumChain = {\n                            blockExplorerUrls,\n                            chainId: numberToHex(chainId),\n                            chainName: addEthereumChainParameter?.chainName ?? chain.name,\n                            iconUrls: addEthereumChainParameter?.iconUrls,\n                            nativeCurrency: addEthereumChainParameter?.nativeCurrency ??\n                                chain.nativeCurrency,\n                            rpcUrls,\n                        };\n                        await provider.request({\n                            method: 'wallet_addEthereumChain',\n                            params: [addEthereumChain],\n                        });\n                        return chain;\n                    }\n                    catch (error) {\n                        throw new UserRejectedRequestError(error);\n                    }\n                }\n                throw new SwitchChainError(error);\n            }\n        },\n        onAccountsChanged(accounts) {\n            if (accounts.length === 0)\n                this.onDisconnect();\n            else\n                config.emitter.emit('change', {\n                    accounts: accounts.map((x) => getAddress(x)),\n                });\n        },\n        onChainChanged(chain) {\n            const chainId = Number(chain);\n            config.emitter.emit('change', { chainId });\n        },\n        async onDisconnect(_error) {\n            config.emitter.emit('disconnect');\n            const provider = await this.getProvider();\n            if (accountsChanged) {\n                provider.removeListener('accountsChanged', accountsChanged);\n                accountsChanged = undefined;\n            }\n            if (chainChanged) {\n                provider.removeListener('chainChanged', chainChanged);\n                chainChanged = undefined;\n            }\n            if (disconnect) {\n                provider.removeListener('disconnect', disconnect);\n                disconnect = undefined;\n            }\n        },\n    }));\n}\nfunction version3(parameters) {\n    const reloadOnDisconnect = false;\n    let sdk;\n    let walletProvider;\n    let accountsChanged;\n    let chainChanged;\n    let disconnect;\n    return createConnector((config) => ({\n        id: 'coinbaseWalletSDK',\n        name: 'Coinbase Wallet',\n        rdns: 'com.coinbase.wallet',\n        type: coinbaseWallet.type,\n        async connect({ chainId, withCapabilities } = {}) {\n            try {\n                const provider = await this.getProvider();\n                const accounts = (await provider.request({\n                    method: 'eth_requestAccounts',\n                })).map((x) => getAddress(x));\n                if (!accountsChanged) {\n                    accountsChanged = this.onAccountsChanged.bind(this);\n                    provider.on('accountsChanged', accountsChanged);\n                }\n                if (!chainChanged) {\n                    chainChanged = this.onChainChanged.bind(this);\n                    provider.on('chainChanged', chainChanged);\n                }\n                if (!disconnect) {\n                    disconnect = this.onDisconnect.bind(this);\n                    provider.on('disconnect', disconnect);\n                }\n                // Switch to chain if provided\n                let currentChainId = await this.getChainId();\n                if (chainId && currentChainId !== chainId) {\n                    const chain = await this.switchChain({ chainId }).catch((error) => {\n                        if (error.code === UserRejectedRequestError.code)\n                            throw error;\n                        return { id: currentChainId };\n                    });\n                    currentChainId = chain?.id ?? currentChainId;\n                }\n                return {\n                    accounts: (withCapabilities\n                        ? accounts.map((address) => ({ address, capabilities: {} }))\n                        : accounts),\n                    chainId: currentChainId,\n                };\n            }\n            catch (error) {\n                if (/(user closed modal|accounts received is empty|user denied account)/i.test(error.message))\n                    throw new UserRejectedRequestError(error);\n                throw error;\n            }\n        },\n        async disconnect() {\n            const provider = await this.getProvider();\n            if (accountsChanged) {\n                provider.removeListener('accountsChanged', accountsChanged);\n                accountsChanged = undefined;\n            }\n            if (chainChanged) {\n                provider.removeListener('chainChanged', chainChanged);\n                chainChanged = undefined;\n            }\n            if (disconnect) {\n                provider.removeListener('disconnect', disconnect);\n                disconnect = undefined;\n            }\n            provider.disconnect();\n            provider.close();\n        },\n        async getAccounts() {\n            const provider = await this.getProvider();\n            return (await provider.request({\n                method: 'eth_accounts',\n            })).map((x) => getAddress(x));\n        },\n        async getChainId() {\n            const provider = await this.getProvider();\n            const chainId = await provider.request({\n                method: 'eth_chainId',\n            });\n            return Number(chainId);\n        },\n        async getProvider() {\n            if (!walletProvider) {\n                // Unwrapping import for Vite compatibility.\n                // See: https://github.com/vitejs/vite/issues/9703\n                const CoinbaseWalletSDK = await (async () => {\n                    const { default: SDK } = await import('cbw-sdk');\n                    if (typeof SDK !== 'function' && typeof SDK.default === 'function')\n                        return SDK.default;\n                    return SDK;\n                })();\n                sdk = new CoinbaseWalletSDK({ ...parameters, reloadOnDisconnect });\n                // Force types to retrieve private `walletExtension` method from the Coinbase Wallet SDK.\n                const walletExtensionChainId = sdk.walletExtension?.getChainId();\n                const chain = config.chains.find((chain) => parameters.chainId\n                    ? chain.id === parameters.chainId\n                    : chain.id === walletExtensionChainId) || config.chains[0];\n                const chainId = parameters.chainId || chain?.id;\n                const jsonRpcUrl = parameters.jsonRpcUrl || chain?.rpcUrls.default.http[0];\n                walletProvider = sdk.makeWeb3Provider(jsonRpcUrl, chainId);\n            }\n            return walletProvider;\n        },\n        async isAuthorized() {\n            try {\n                const accounts = await this.getAccounts();\n                return !!accounts.length;\n            }\n            catch {\n                return false;\n            }\n        },\n        async switchChain({ addEthereumChainParameter, chainId }) {\n            const chain = config.chains.find((chain) => chain.id === chainId);\n            if (!chain)\n                throw new SwitchChainError(new ChainNotConfiguredError());\n            const provider = await this.getProvider();\n            try {\n                await provider.request({\n                    method: 'wallet_switchEthereumChain',\n                    params: [{ chainId: numberToHex(chain.id) }],\n                });\n                return chain;\n            }\n            catch (error) {\n                // Indicates chain is not added to provider\n                if (error.code === 4902) {\n                    try {\n                        let blockExplorerUrls;\n                        if (addEthereumChainParameter?.blockExplorerUrls)\n                            blockExplorerUrls = addEthereumChainParameter.blockExplorerUrls;\n                        else\n                            blockExplorerUrls = chain.blockExplorers?.default.url\n                                ? [chain.blockExplorers?.default.url]\n                                : [];\n                        let rpcUrls;\n                        if (addEthereumChainParameter?.rpcUrls?.length)\n                            rpcUrls = addEthereumChainParameter.rpcUrls;\n                        else\n                            rpcUrls = [chain.rpcUrls.default?.http[0] ?? ''];\n                        const addEthereumChain = {\n                            blockExplorerUrls,\n                            chainId: numberToHex(chainId),\n                            chainName: addEthereumChainParameter?.chainName ?? chain.name,\n                            iconUrls: addEthereumChainParameter?.iconUrls,\n                            nativeCurrency: addEthereumChainParameter?.nativeCurrency ??\n                                chain.nativeCurrency,\n                            rpcUrls,\n                        };\n                        await provider.request({\n                            method: 'wallet_addEthereumChain',\n                            params: [addEthereumChain],\n                        });\n                        return chain;\n                    }\n                    catch (error) {\n                        throw new UserRejectedRequestError(error);\n                    }\n                }\n                throw new SwitchChainError(error);\n            }\n        },\n        onAccountsChanged(accounts) {\n            if (accounts.length === 0)\n                this.onDisconnect();\n            else\n                config.emitter.emit('change', {\n                    accounts: accounts.map((x) => getAddress(x)),\n                });\n        },\n        onChainChanged(chain) {\n            const chainId = Number(chain);\n            config.emitter.emit('change', { chainId });\n        },\n        async onDisconnect(_error) {\n            config.emitter.emit('disconnect');\n            const provider = await this.getProvider();\n            if (accountsChanged) {\n                provider.removeListener('accountsChanged', accountsChanged);\n                accountsChanged = undefined;\n            }\n            if (chainChanged) {\n                provider.removeListener('chainChanged', chainChanged);\n                chainChanged = undefined;\n            }\n            if (disconnect) {\n                provider.removeListener('disconnect', disconnect);\n                disconnect = undefined;\n            }\n        },\n    }));\n}\n//# sourceMappingURL=coinbaseWallet.js.map","import { createConnector, ProviderNotFoundError, } from '@wagmi/core';\nimport { getAddress, withTimeout } from 'viem';\nsafe.type = 'safe';\nexport function safe(parameters = {}) {\n    const { shimDisconnect = false } = parameters;\n    let provider_;\n    let disconnect;\n    return createConnector((config) => ({\n        id: 'safe',\n        name: 'Safe',\n        type: safe.type,\n        async connect({ withCapabilities } = {}) {\n            const provider = await this.getProvider();\n            if (!provider)\n                throw new ProviderNotFoundError();\n            const accounts = await this.getAccounts();\n            const chainId = await this.getChainId();\n            if (!disconnect) {\n                disconnect = this.onDisconnect.bind(this);\n                provider.on('disconnect', disconnect);\n            }\n            // Remove disconnected shim if it exists\n            if (shimDisconnect)\n                await config.storage?.removeItem('safe.disconnected');\n            return {\n                // TODO(v3): Make `withCapabilities: true` default behavior\n                accounts: (withCapabilities\n                    ? accounts.map((address) => ({ address, capabilities: {} }))\n                    : accounts),\n                chainId,\n            };\n        },\n        async disconnect() {\n            const provider = await this.getProvider();\n            if (!provider)\n                throw new ProviderNotFoundError();\n            if (disconnect) {\n                provider.removeListener('disconnect', disconnect);\n                disconnect = undefined;\n            }\n            // Add shim signalling connector is disconnected\n            if (shimDisconnect)\n                await config.storage?.setItem('safe.disconnected', true);\n        },\n        async getAccounts() {\n            const provider = await this.getProvider();\n            if (!provider)\n                throw new ProviderNotFoundError();\n            return (await provider.request({ method: 'eth_accounts' })).map(getAddress);\n        },\n        async getProvider() {\n            // Only allowed in iframe context\n            const isIframe = typeof window !== 'undefined' && window?.parent !== window;\n            if (!isIframe)\n                return;\n            if (!provider_) {\n                const { default: SDK } = await import('@safe-global/safe-apps-sdk');\n                const sdk = new SDK(parameters);\n                // `getInfo` hangs when not used in Safe App iFrame\n                // https://github.com/safe-global/safe-apps-sdk/issues/263#issuecomment-1029835840\n                const safe = await withTimeout(() => sdk.safe.getInfo(), {\n                    timeout: parameters.unstable_getInfoTimeout ?? 10,\n                });\n                if (!safe)\n                    throw new Error('Could not load Safe information');\n                // Unwrapping import for Vite compatibility.\n                // See: https://github.com/vitejs/vite/issues/9703\n                const SafeAppProvider = await (async () => {\n                    const Provider = await import('@safe-global/safe-apps-provider');\n                    if (typeof Provider.SafeAppProvider !== 'function' &&\n                        typeof Provider.default.SafeAppProvider === 'function')\n                        return Provider.default.SafeAppProvider;\n                    return Provider.SafeAppProvider;\n                })();\n                provider_ = new SafeAppProvider(safe, sdk);\n            }\n            return provider_;\n        },\n        async getChainId() {\n            const provider = await this.getProvider();\n            if (!provider)\n                throw new ProviderNotFoundError();\n            return Number(provider.chainId);\n        },\n        async isAuthorized() {\n            try {\n                const isDisconnected = shimDisconnect &&\n                    // If shim exists in storage, connector is disconnected\n                    (await config.storage?.getItem('safe.disconnected'));\n                if (isDisconnected)\n                    return false;\n                const accounts = await this.getAccounts();\n                return !!accounts.length;\n            }\n            catch {\n                return false;\n            }\n        },\n        onAccountsChanged() {\n            // Not relevant for Safe because changing account requires app reload.\n        },\n        onChainChanged() {\n            // Not relevant for Safe because Safe smart contract wallets only exist on single chain.\n        },\n        onDisconnect() {\n            config.emitter.emit('disconnect');\n        },\n    }));\n}\n//# sourceMappingURL=safe.js.map"],"file":"assets/index-DxZOVE5z.js"}